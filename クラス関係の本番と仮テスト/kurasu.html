<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task List</title>
</head>
<body>
    <div>
        <button id="addTaskBtn">タスクを追加</button>
        <ul id="taskList"></ul>
        <input id="taskInput" placeholder="タスクを入力">
        <select id="taskDeadline">
            <option value="30">30分</option>
            <option value="60">1時間</option>
            <option value="720">半日</option>
            <option value="1440">1日</option>
        </select>
    </div>

    <script>
        class TaskManager {　//タスクの追加と削除をするクラス
            constructor() {
                this.taskList = document.getElementById("taskList");
                this.taskInput = document.getElementById("taskInput");
                this.taskDeadline = document.getElementById("taskDeadline");
                this.addTaskBtn = document.getElementById("addTaskBtn");

                this.addTaskBtn.addEventListener("click", this.addTask.bind(this));
            }

            addTask() {
                const taskText = this.taskInput.value.trim();
                const deadlineValue = parseInt(this.taskDeadline.value, 10);

                if (taskText !== "") {
                    const newTask = new TaskItem(taskText, deadlineValue);
                    this.taskList.appendChild(newTask.render());
                    this.taskInput.value = "";
                }
            }
        }

         class TaskItem {   //タスクを担当してもらうクラス
            constructor(text, deadline) { //メゾット　タスクのテキストと期間を受ける、制作する。
                this.text = text;
                this.status = "未完了";
                this.deadline = deadline;
                this.element = document.createElement("li");
                this.taskBotan = document.createElement("button");
                this.deleteButton = document.createElement("button");

                this.taskBotan.textContent = "未完了";
                this.deleteButton.textContent = "削除";

                this.element.textContent = `${this.text} (期限: ${this.formatDeadline()})`;
                this.element.appendChild(this.taskBotan);
                this.element.appendChild(this.deleteButton);

                this.taskBotan.addEventListener("click", this.toggleStatus.bind(this));
                this.deleteButton.addEventListener("click", this.deleteTask.bind(this));
            }

            toggleStatus() { //メゾット　タスクの切り替えを行う　未完了から完了
                this.taskBotan.textContent = (this.taskBotan.textContent === "未完了") ? "完了" : "未完了";
            }

            deleteTask() { //メソッドは、タスクアイテムをリストから削除する？
                this.element.parentNode.removeChild(this.element);
            }

            formatDeadline() {　//メゾット　期限を表記する
                const hours = Math.floor(this.deadline / 60);
                const minutes = this.deadline % 60;
                return `${hours}時間${minutes}分`;
            }

            render() {　//メゾット　要素を戻す。
                return this.element;
            }
        }

        // タスクマネージャーのインスタンスを作る？
        const taskManager = new TaskManager();
    </script>
</body>
</html>